<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Until</title>
</head>

<body style="font-family: Arial, Helvetica, sans-serif;">
    <h1>Time Until</h1>
    <div>?year=2000&month=01&day=01&hour=01&minute=01</div>
    <hr>
    <div>Until <span id="target"></span> there are: </div>
    <br>
    <div>Years: <span id="years"></span></div>
    <div>Weeks: <span id="weeks"></span></div>
    <div>Days: <span id="days"></span></div>
    <div>Hours: <span id="hours"></span></div>
    <div>Minutes: <span id="minutes"></span></div>
    <div>Seconds: <span id="seconds"></span></div>
    <div>Instant Noodles: <span id="instant_noodles"></span></div>
    <div>Pizzas: <span id="pizza"></span></div>
    <div>Minecraft Days: <span id="minecraft_days"></span></div>
    <div>Moon phases: <span id="moon_phases"></span></div>
    <div>The Big Bang Theory Episodes: <span id="bbt_episodes"></span></div>
    <div>The Office Episodes: <span id="office_episodes"></span></div>
    <div>Elton John - I'm Still Standing Recordings: <span id="still_standing"></span></div>
    <div>School Lessons (45min) <span id="school_lessons"></span></div>
    <div>Park Sessions <span id="park_sessions"></span></div>


    <script>
        function getUrlParameter(name) {
            name = name.replace(/[[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        let day = getUrlParameter("day");
        let month = getUrlParameter("month");
        let year = getUrlParameter("year");
        let hour = getUrlParameter("hour");
        let minute = getUrlParameter("minute");

        var target = new Date(year, month - 1, day, hour, minute);

        document.getElementById("target").textContent = target;

        console.log(target);

        function refresh() {
            let now = Date.now();

            let seconds_between = (target.valueOf() - now.valueOf()) / 1000; // /1000 convert from ms to s

            let minutes = seconds_between / 60;
            let hours = minutes / 60;
            let days = hours / 24;
            let years = days / 265;

            document.getElementById("seconds").textContent = seconds_between;
            document.getElementById("minutes").textContent = minutes;
            document.getElementById("hours").textContent = hours;
            document.getElementById("days").textContent = days;
            document.getElementById("weeks").textContent = days / 7;
            document.getElementById("years").textContent = years;
            document.getElementById("instant_noodles").textContent = minutes / 5;
            document.getElementById("pizza").textContent = minutes / 13;
            document.getElementById("minecraft_days").textContent = minutes / 20;
            document.getElementById("moon_phases").textContent = days / 29, 53;
            document.getElementById("bbt_episodes").textContent = minutes / 22;
            document.getElementById("still_standing").textContent = minutes / 4;
            document.getElementById("school_lessons").textContent = minutes / 45;
            document.getElementById("park_sessions").textContent = hours / 5.5;
            document.getElementById("office_episodes").textContent = minutes / 23;
        }

        var intervalId = window.setInterval(function () {
            refresh()
        }, 1000);
    </script>
</body>

</html>
